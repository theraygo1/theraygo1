<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>5K Savings Group</title>
<style>
  /* Textured green background */
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1e5631;
    background-image:
      radial-gradient(circle at 20% 20%, rgba(255,255,255,0.05) 1px, transparent 2px),
      radial-gradient(circle at 80% 80%, rgba(255,255,255,0.05) 1px, transparent 2px);
    background-size: 50px 50px;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    min-height: 100vh;
  }

  h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    letter-spacing: 3px;
    text-shadow: 0 0 10px #2ecc71;
  }

  #namesInput {
    width: 300px;
    height: 120px;
    font-size: 1rem;
    border-radius: 10px;
    border: none;
    padding: 10px;
    resize: none;
    box-shadow: 0 0 10px #27ae60;
    background: rgba(255,255,255,0.1);
    color: #e6ffe6;
    outline: none;
  }

  #pickBtn {
    margin-top: 20px;
    padding: 15px 30px;
    font-size: 1.3rem;
    border: none;
    border-radius: 30px;
    background: #27ae60;
    color: white;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(39, 174, 96, 0.6);
    transition: background 0.3s ease;
  }
  #pickBtn:hover {
    background: #2ecc71;
  }
  #pickBtn:disabled {
    background: #145214;
    cursor: not-allowed;
  }

  /* Popup overlay */
  #popup {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.75);
    display: flex;
    justify-content: center;
    align-items: center;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 10;
  }

  #popup.show {
    visibility: visible;
    opacity: 1;
  }

  #popupContent {
    background: #27ae60;
    padding: 40px 60px;
    border-radius: 25px;
    box-shadow: 0 0 30px #2ecc71;
    font-size: 2.8rem;
    font-weight: 700;
    color: white;
    text-align: center;
    animation: popupBounce 0.6s ease forwards;
    letter-spacing: 2px;
    user-select: none;
  }

  @keyframes popupBounce {
    0% {
      transform: scale(0.7);
      opacity: 0;
      text-shadow: none;
    }
    50% {
      transform: scale(1.15);
      opacity: 1;
      text-shadow: 0 0 10px #a5f3a5, 0 0 20px #a5f3a5;
    }
    100% {
      transform: scale(1);
      text-shadow: 0 0 15px #2ecc71, 0 0 30px #27ae60;
    }
  }

  /* Spinner animation for the button */
  .spinning {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
  }

  /* Responsive */
  @media (max-width: 480px) {
    #namesInput {
      width: 90vw;
      height: 150px;
    }
    #popupContent {
      font-size: 2rem;
      padding: 30px 40px;
    }
  }

</style>
</head>
<body>

<h1>5K Savings Group</h1>

<textarea id="namesInput" placeholder="Enter 5 to 10 names, each on a new line..."></textarea>

<button id="pickBtn">Pick a Random Name</button>

<!-- Popup for showing chosen name -->
<div id="popup">
  <div id="popupContent"></div>
</div>

<script>
  const pickBtn = document.getElementById('pickBtn');
  const namesInput = document.getElementById('namesInput');
  const popup = document.getElementById('popup');
  const popupContent = document.getElementById('popupContent');

  function getNames() {
    // Split by new line, trim and filter out empty lines
    return namesInput.value
      .split('\n')
      .map(n => n.trim())
      .filter(n => n.length > 0);
  }

  function showPopup(name) {
    popupContent.textContent = name;
    popup.classList.add('show');
  }

  function hidePopup() {
    popup.classList.remove('show');
  }

  // Animate name picking by cycling through names fast
  async function animatePick(names) {
    return new Promise(resolve => {
      let count = 0;
      const totalCycles = 30; // how many cycles
      const interval = 50; // ms

      const intervalId = setInterval(() => {
        popupContent.textContent = names[count % names.length];
        count++;
        if (count > totalCycles) {
          clearInterval(intervalId);
          resolve(popupContent.textContent);
        }
      }, interval);
    });
  }

  pickBtn.addEventListener('click', async () => {
    const names = getNames();
    if (names.length < 5 || names.length > 10) {
      alert('Please enter between 5 to 10 names.');
      return;
    }

    pickBtn.disabled = true;
    showPopup('Picking...');
    // Animate cycling names
    const chosenName = await animatePick(names);

    // Show final chosen name with bounce animation
    popupContent.textContent = chosenName;
    popupContent.style.animation = 'popupBounce 0.6s ease forwards';

    pickBtn.disabled = false;
  });

  // Close popup on click outside or on name
  popup.addEventListener('click', (e) => {
    if (e.target === popup || e.target === popupContent) {
      hidePopup();
    }
  });
</script>

</body>
</html>
